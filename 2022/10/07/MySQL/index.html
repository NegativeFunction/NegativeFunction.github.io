<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="https://zzqwink-1310627138.cos.ap-shanghai.myqcloud.com/document/20221116021415.jpg">
  <link rel="icon" type="image/png" sizes="32x32" href="https://zzqwink-1310627138.cos.ap-shanghai.myqcloud.com/document/20221116021415.jpg">
  <link rel="icon" type="image/png" sizes="16x16" href="https://zzqwink-1310627138.cos.ap-shanghai.myqcloud.com/document/20221116021415.jpg">
  <link rel="mask-icon" href="https://zzqwink-1310627138.cos.ap-shanghai.myqcloud.com/document/20221116021415.jpg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"negativefunction.github.io","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="数据库 数据库简介  数据库（DB 、DataBase） 简单理解就是数据仓库，软件，安装在操作系统（windows，linux，mac，…）之上！SQL，可以存储大量的数据。可轻松存储500万数据。主要用于 存储数据、管理数据 根据类型区分为：  关系型数据库 SQL  关系型数据库有 MySQL，Oracle、Sql server ， DB2，SQLlite  主要通过表和表之间，行和列之间的">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL">
<meta property="og:url" content="https://negativefunction.github.io/2022/10/07/MySQL/index.html">
<meta property="og:site_name" content="Welcome To Lin&#39;s World">
<meta property="og:description" content="数据库 数据库简介  数据库（DB 、DataBase） 简单理解就是数据仓库，软件，安装在操作系统（windows，linux，mac，…）之上！SQL，可以存储大量的数据。可轻松存储500万数据。主要用于 存储数据、管理数据 根据类型区分为：  关系型数据库 SQL  关系型数据库有 MySQL，Oracle、Sql server ， DB2，SQLlite  主要通过表和表之间，行和列之间的">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/image-20221003230239568.png">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/image-20221004120212037.png">
<meta property="og:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/image-20221021180428225.png">
<meta property="article:published_time" content="2022-10-07T09:20:03.000Z">
<meta property="article:modified_time" content="2023-01-21T12:38:15.515Z">
<meta property="article:author" content="Linyuxuan">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/image-20221003230239568.png">

<link rel="canonical" href="https://negativefunction.github.io/2022/10/07/MySQL/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'en'
  };
</script>

  <title>MySQL | Welcome To Lin's World</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Welcome To Lin's World</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">The Future Will Come</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives<span class="badge">18</span></a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en">
    <link itemprop="mainEntityOfPage" href="https://negativefunction.github.io/2022/10/07/MySQL/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/05.jpg">
      <meta itemprop="name" content="Linyuxuan">
      <meta itemprop="description" content="Hope Sometimes Love Brain">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Welcome To Lin's World">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2022-10-07 17:20:03" itemprop="dateCreated datePublished" datetime="2022-10-07T17:20:03+08:00">2022-10-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2023-01-21 20:38:15" itemprop="dateModified" datetime="2023-01-21T20:38:15+08:00">2023-01-21</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><blockquote>
<p><strong>数据库简介</strong></p>
</blockquote>
<p><strong>数据库（DB 、DataBase）</strong></p>
<p>简单理解就是数据仓库，<strong>软件</strong>，安装在操作系统（windows，linux，mac，…）之上！SQL，可以存储大量的数据。可轻松存储500万数据。主要用于 存储数据、管理数据</p>
<p>根据类型区分为：</p>
<ul>
<li><p><strong>关系型数据库 SQL</strong> </p>
<p>关系型数据库有 MySQL，Oracle、Sql server ， DB2，SQLlite  主要<strong>通过表和表之间，行和列之间的关系进行数据的存储</strong>，例如学员信息表，考勤表…</p>
</li>
<li><p><strong>非关系型数据库（NoSQL）not only</strong></p>
<p>非关系型数据库有 Redis、MongDB 主要用于对象存储，通过对象的自身属性来决定</p>
</li>
</ul>
<p><strong>DBMS（数据库管理系统）</strong></p>
<ul>
<li>数据库管理系统 ( <strong>D</strong>ata<strong>B</strong>ase <strong>M</strong>anagement <strong>S</strong>ystem )</li>
<li>数据库管理软件 , 科学组织和存储数据 , 高效地获取和维护数据 –MySQL 即为一个数据库管理系统</li>
</ul>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/image-20221003230239568.png" alt="image-20221003230239568"></p>
<blockquote>
<p><strong>数据库驱动</strong></p>
</blockquote>
<h2 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h2><blockquote>
<p><strong>学习境界之道</strong></p>
</blockquote>
<p>早期的数据存储 txt Excel Word</p>
<p>开发人员从业之道：</p>
<ul>
<li>只会写代码 与简单的CRUD 基本靠混</li>
<li>熟悉各种框架 了解操作系统 数据库底层 数据结构与算法 –不错的程序开发人员</li>
<li>精通离散数学 数字电路 体系结构 编译原理 配合实战 应用开发技术 –高级程序架构设计人员</li>
</ul>
<p>&#x3D;&#x3D;数据库学习去IOE 数据库是所有软件体系中最核心的存在 衍生岗位 DBA&#x3D;&#x3D;</p>
<h3 id="1-MySQL简介"><a href="#1-MySQL简介" class="headerlink" title="1. MySQL简介"></a>1. MySQL简介</h3><blockquote>
<p> <strong>MySQL特点</strong></p>
</blockquote>
<ul>
<li>MySQL 是现在<strong>流行</strong>的<strong>开源</strong>的,<strong>免费</strong>的 <strong>关系型</strong>数据库</li>
<li>由瑞典MySQL AB 公司开发，目前属于 Oracle 旗下产品</li>
<li>免费 , 开源数据库  小巧 , 功能齐全 使用便捷  使用SQL语言</li>
<li>可运行于Windows或Linux操作系统</li>
<li>可适用于中小型甚至大型网站应用 –可以使用集群<br><strong>官网 : <a target="_blank" rel="noopener" href="https://www.mysql.com/">https://www.mysql.com/</a></strong></li>
</ul>
<blockquote>
<p><strong>MySQL安装步骤</strong></p>
</blockquote>
<p><strong>Mysql绿色简易版</strong></p>
<ol>
<li><p>解压mysql的zip压缩包到自己的环境目录</p>
</li>
<li><p>配置环境变量 bin目录 到Path</p>
</li>
<li><p>在mysql 解压目录下 新建 my.ini 文件 即mysql核心配置文件</p>
</li>
<li><p>编写 my.ini 核心配置文件</p>
<figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[mysqld]</span></span><br><span class="line"><span class="comment"># 设置3306端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="comment"># 设置mysql的安装目录</span></span><br><span class="line"><span class="attr">basedir</span>=D:\mysql\mysql-<span class="number">5.7</span>.<span class="number">37</span>-winx64</span><br><span class="line"><span class="comment"># 设置mysql数据库的数据的存放目录 不用新建目录 配置好 ini 文件后可以自动生成</span></span><br><span class="line"><span class="attr">datadir</span>=D:\mysql\mysql-<span class="number">5.7</span>.<span class="number">37</span>-winx64\Data</span><br><span class="line"><span class="comment"># 允许最大连接数</span></span><br><span class="line"><span class="attr">max_connections</span>=<span class="number">200</span></span><br><span class="line"><span class="comment"># 允许连接失败的次数。</span></span><br><span class="line"><span class="attr">max_connect_errors</span>=<span class="number">10</span></span><br><span class="line"><span class="comment"># 服务端使用的字符集默认为utf8mb4</span></span><br><span class="line"><span class="attr">character-set-server</span>=utf8mb4</span><br><span class="line"><span class="comment"># 创建新表时将使用的默认存储引擎</span></span><br><span class="line"><span class="attr">default-storage-engine</span>=INNODB</span><br><span class="line"><span class="comment"># 默认使用“mysql_native_password”插件认证</span></span><br><span class="line"><span class="comment">#mysql_native_password</span></span><br><span class="line"><span class="attr">default_authentication_plugin</span>=mysql_native_password</span><br><span class="line"><span class="section">[mysql]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端默认字符集</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br><span class="line"><span class="section">[client]</span></span><br><span class="line"><span class="comment"># 设置mysql客户端连接服务端时默认使用的端口</span></span><br><span class="line"><span class="attr">port</span>=<span class="number">3306</span></span><br><span class="line"><span class="attr">default-character-set</span>=utf8mb4</span><br><span class="line"></span><br><span class="line"><span class="comment"># 跳过密码验证 即第一次安装没有密码也可以进入</span></span><br><span class="line"><span class="comment"># skip-grant-tables</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
</li>
<li><p>管理员权限下 在 &#x2F;bin 目录下 执行命令 安装mysql 服务</p>
<ul>
<li><p>安装数据库服务 <code>mysqld -install</code></p>
</li>
<li><p>初始化数据库服务 <code>mysqld --initialize-insecure --user=mysql</code></p>
</li>
<li><p>启动mysql服务 <code>net start mysql</code></p>
</li>
<li><p>登录mysql用户 <code>mysql -u root -p</code></p>
</li>
<li><p>若设置了跳过密码验证则第一次输入密码为空</p>
</li>
<li><p>执行命令更改密码 </p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> authentication_string<span class="operator">=</span>password(<span class="string">&#x27;123456&#x27;</span>) <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span> <span class="keyword">and</span> Host <span class="operator">=</span> <span class="string">&#x27;localhost&#x27;</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>执行 <code>flush privileges</code> 命令刷新权限</p>
</li>
<li><p>修改密码后 删除 或 注释 my.ini 配置文件中跳过密码验证</p>
</li>
<li><p>重启 mysql 后即可正常使用</p>
<p><code>net stop mysql</code><br><code>net start mysql</code></p>
</li>
</ul>
</li>
</ol>
<p>可能出现的问题：</p>
<ol>
<li><p>缺少组件 .dll</p>
</li>
<li><p>命令输错了</p>
</li>
<li><p>环境变量中有以下两条才能在mysql命令行中使用 <code>net</code> 命令</p>
<p><img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/image-20221004120212037.png" alt="image-20221004120212037"></p>
</li>
<li><p>mysql清空服务命令 慎重使用 <code>sc delete mysql</code></p>
</li>
</ol>
<p><strong>.msi傻瓜一键式安装</strong></p>
<ol>
<li>官网下载 .msi安装启动器 一键式安装</li>
<li>一直下一步</li>
</ol>
<p><strong>可视化数据库管理 SQLyog安装</strong></p>
<ol>
<li>下载SQLyog的 .exe 安装包 下一步傻瓜式安装</li>
<li>输入注册码 和 密钥</li>
</ol>
<p><strong>SQLyog中输入基础命令</strong></p>
<p>&#x3D;&#x3D;基础命令初窥&#x3D;&#x3D;</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> VERSION();	<span class="comment">-- 查看mysql版本</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> mysql.user <span class="keyword">set</span> authentication_string<span class="operator">=</span>password(<span class="string">&#x27;123456&#x27;</span>) <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span> <span class="keyword">and</span> Host <span class="operator">=</span> <span class="string">&#x27;localhost&#x27;</span>;	<span class="comment">-- 修改密码 即修改mysql默认表中的权限等级 密码</span></span><br><span class="line"></span><br><span class="line">flush privileges <span class="comment">-- 刷新权限 通常在更改权限后 或者修改密码后使用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> databases <span class="comment">-- 显示所有数据库</span></span><br><span class="line"></span><br><span class="line">mysql<span class="operator">&gt;</span> use school <span class="comment">-- 切换数据库 use 数据库名</span></span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line"><span class="keyword">show</span> tables <span class="comment">-- 显示数据库中 所有表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">describe</span> student <span class="comment">-- 查看表中 所有字段信息</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> database westos <span class="comment">-- 创建数据库</span></span><br><span class="line"></span><br><span class="line">exit <span class="comment">-- 退出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	多行注释方式</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查看 MySQL 版本</p>
<p><strong>SQLyog基础操作</strong></p>
<ol>
<li><p>创建数据库</p>
<p>数据库名称 school</p>
<p>基字符集 utf8</p>
<p>数据库排序规则 utf8_general_ci</p>
</li>
<li><p>创建表</p>
<p>表名称 student</p>
<p>引擎 InnoDB</p>
<p>字符集 utf8</p>
<p>核对 utf8_general_ci</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `school`.`student`( </span><br><span class="line">    `id` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学员id&#x27;</span>, </span><br><span class="line">    `name` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学员姓名&#x27;</span>, </span><br><span class="line">    `age` <span class="type">INT</span>(<span class="number">3</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学员年龄&#x27;</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`) </span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_general_ci; </span><br></pre></td></tr></table></figure>
</li>
<li><p>添加记录</p>
</li>
</ol>
<blockquote>
<p><strong>数据库语言分类</strong></p>
</blockquote>
<p><strong>数据库语言分类</strong></p>
<ul>
<li><strong>DDL 数据库定义语言</strong></li>
<li><strong>DML 数据库操作语言</strong></li>
<li><strong>DQL 数据库查询语言</strong></li>
<li><strong>DCL 数据库控制语言</strong></li>
</ul>
<p>本质为 CRUD 增删改查</p>
<h3 id="2-操作MySQL"><a href="#2-操作MySQL" class="headerlink" title="2. 操作MySQL"></a>2. 操作MySQL</h3><p>&#x3D;&#x3D;<em>MySQL不区分大小写</em>&#x3D;&#x3D;</p>
<p>操作数据库大致分为：</p>
<ul>
<li>操作数据库 </li>
<li>操作数据库中的表 </li>
<li>操作数据库中表的数据</li>
</ul>
<p>业务层面：</p>
<p>操作数据库 –跨表 –跨数据库 –SQL性能调优 –底层设计实现</p>
<p>淘宝 –千人千面</p>
<h4 id="2-1-操作数据库"><a href="#2-1-操作数据库" class="headerlink" title="2.1 操作数据库"></a>2.1 操作数据库</h4><blockquote>
<p><strong>数据库基础命令</strong></p>
</blockquote>
<p><strong>数据库操作</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建数据库</span></span><br><span class="line"><span class="keyword">create</span> database if <span class="keyword">not</span> <span class="keyword">exists</span> westos;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除数据库</span></span><br><span class="line"><span class="keyword">drop</span> database if <span class="keyword">exists</span> westos</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 使用数据库 如果 数据库名 或 表名 是一个特殊字符 就需要被 `` 引入</span></span><br><span class="line">use `school` </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看所有数据库</span></span><br><span class="line"><span class="keyword">show</span> databases</span><br><span class="line"><span class="keyword">show</span> `school`</span><br></pre></td></tr></table></figure>



<p><strong>数据表基础SQL语句</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*[0:46:20][25 ms]*/</span> </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `school`.`<span class="keyword">user</span>`( </span><br><span class="line">    `id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;用户id&#x27;</span>, </span><br><span class="line">    `name` <span class="type">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;用户姓名&#x27;</span>, </span><br><span class="line">    `password` <span class="type">VARCHAR</span>(<span class="number">128</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;123456&#x27;</span> COMMENT <span class="string">&#x27;用户密码&#x27;</span>, </span><br><span class="line">    `sex` <span class="type">INT</span>(<span class="number">1</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="number">0</span> COMMENT <span class="string">&#x27;性别 0 - girl 1 - boy&#x27;</span>, </span><br><span class="line">    `birthday` DATETIME COMMENT <span class="string">&#x27;用户出生日期&#x27;</span>, </span><br><span class="line">    `addresss` <span class="type">VARCHAR</span>(<span class="number">128</span>) COMMENT <span class="string">&#x27;用户住址&#x27;</span>, </span><br><span class="line">    `email` <span class="type">VARCHAR</span>(<span class="number">128</span>) COMMENT <span class="string">&#x27;用户邮箱&#x27;</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`) </span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_general_ci; </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 目标:创建一个schoo1数据库</span></span><br><span class="line"><span class="comment">-- 创建学生表(列,字段)使用SQL 创建</span></span><br><span class="line"><span class="comment">-- 学号int 登录密码varchar(20)姓名,性别varchar(2),出生日期(datatime)，家庭住址，emai1--注意点，使用英文()，表的名称和字段尽量使用括起来</span></span><br><span class="line"><span class="comment">-- AUTO_ INCREMENT 自增</span></span><br><span class="line"><span class="comment">-- 字符串使用单引号括起来</span></span><br><span class="line"><span class="comment">-- 所有的语句后面加,(英文逗号)，最后一个不用加</span></span><br><span class="line"><span class="comment">-- PRIMARY KEY 主键，通常一个表中只有唯一的一个主键</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE `school`</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `student` (</span><br><span class="line">`id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">`name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">`pwd` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;123456&#x27;</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">`sex` <span class="type">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;男&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">`birthday` DATETIME <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">`address` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;家庭住址&#x27;</span>,</span><br><span class="line">`email` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建表 格式</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] `表名`(</span><br><span class="line">`字段名` 列类型[属性][索引][注释],</span><br><span class="line">`字段名` 列类型[属性][索引][注释],</span><br><span class="line">...</span><br><span class="line">`字段名` 列类型[属性][索引][注释]</span><br><span class="line">)[表类型][表的字符集设置][注释]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建数据库对象 对应常见sql语句</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE school <span class="comment">-- 查看创建数据库的语句</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student <span class="comment">-- 查看student数据表的定义语句</span></span><br><span class="line"><span class="keyword">DESC</span> student <span class="comment">-- 显示表的结构</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*[23:14:38][26 ms]*/</span> </span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `school`.`teacher`( </span><br><span class="line">    `id` <span class="type">INT</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT, </span><br><span class="line">    `name` <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">    `age` <span class="type">INT</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>, </span><br><span class="line">    <span class="keyword">PRIMARY</span> KEY (`id`) ) ENGINE<span class="operator">=</span>INNODB CHARSET<span class="operator">=</span>utf8 <span class="keyword">COLLATE</span><span class="operator">=</span>utf8_general_ci AUTO_INCREMENT<span class="operator">=</span><span class="number">128</span> AVG_ROW_LENGTH<span class="operator">=</span><span class="number">2</span>; </span><br><span class="line"><span class="comment">-- 设置 AUTO_INCREMENT 的自动增量 和 平均行长度</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改表</span></span><br><span class="line"><span class="comment">-- 修改表名 ALTER TABLE `旧表名` RENAME AS `新表名`</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `teacher` RENAME <span class="keyword">AS</span> `teacher01`</span><br><span class="line"><span class="comment">-- 修改表 增加表字段 ALTER TABLE `表名` ADD `字段名` INT(11) NOT NULL</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `teacher01` <span class="keyword">ADD</span> `height` <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="comment">-- 修改表字段 -修改字段名 -修改约束 </span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `teacher01` MODIFY `age` <span class="type">VARCHAR</span>(<span class="number">11</span>) <span class="comment">-- 修改约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `teacher01` CHANGE `age` `age22` <span class="type">INT</span>(<span class="number">11</span>) <span class="comment">-- 修改 字段名 和 约束</span></span><br><span class="line"><span class="comment">-- TODO 探究 MODIFY 与 CHANGE 的区别</span></span><br><span class="line"><span class="comment">-- MODIFY 不能用来重命名 只能修改 字段类型 和 约束</span></span><br><span class="line"><span class="comment">-- CHANGE 可以用来重命名 同时也能 修改 字段类型 和 约束</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表字段</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `teacher01` <span class="keyword">DROP</span> `salary`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除表 -如果表存在就删除</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `student`</span><br></pre></td></tr></table></figure>



<p>&#x3D;&#x3D;所有的 创建 和 删除 都建议 加上判断 避免报错&#x3D;&#x3D;</p>
<p>注意：</p>
<ul>
<li>&#96;&#96; 字段名 建议使用 反引号包裹 避免与 关键字 冲突、</li>
<li>注释 单行注释 使用 <code>--</code> 多行注释 使用 <code>/**/</code></li>
<li>SQL 关键字大小写不敏感 建议大家 合理使用大小写 命名使用下划线式命名</li>
<li>注意所有符号必须使用英文</li>
</ul>
<h4 id="2-2-操作数据库的表"><a href="#2-2-操作数据库的表" class="headerlink" title="2.2 操作数据库的表"></a>2.2 操作数据库的表</h4><blockquote>
<p><strong>MySQL数据类型 及 字段属性</strong> </p>
</blockquote>
<p><strong>数值number</strong></p>
<ul>
<li>tinyint 特别小的数据 1个字节</li>
<li>smallint 较小的数据 2个字节</li>
<li>mediumint 中等大小 3个字节</li>
<li><strong>int 标准的整数 4个字节（常用）</strong></li>
<li>bigint 较大的数据 8个字节</li>
<li>float 浮点数 4个字节</li>
<li>double 浮点数 8个字节 （精度问题）</li>
<li>decimal 字符串形式的浮点数，通常金融计算时使用</li>
</ul>
<p><strong>字符串</strong></p>
<ul>
<li>char 字符串固定大小 0-255</li>
<li><strong>varchar 可变字符串 0-65535</strong>（常用） String 用于保存常用的变量 &#x3D;&#x3D;–utf8下每个字符最大占用3个字节(65535&#x2F;3&#x3D;21845)&#x3D;&#x3D; </li>
<li>tinytext 微型文本 2^8-1</li>
<li><strong>text 文本串 2^16-1</strong> (保存大文本)</li>
</ul>
<p><strong>时间日期</strong></p>
<p>在 Java 中 有 java.util.date 来保存和使用时间</p>
<ul>
<li>date YYYY-MM-DD，日期</li>
<li>time HH:mm:ss 时间格式</li>
<li><strong>datetime YYYY-MM-DD HH:mm:ss 最常用的时间格式</strong> 或者 使用 int 型来保存时间戳</li>
<li>timestamp 时间戳 1970.1.1到现在的毫秒数 –也较为常用</li>
<li>year 年份表示</li>
</ul>
<p><strong>null</strong></p>
<p>null值 即 空值 没有值</p>
<p>注意 不要使用 null 值进行计算 如果使用 null 值进行计算 那么结果一定为 null </p>
<p>&#x3D;&#x3D;字段长度&#x3D;&#x3D;</p>
<ul>
<li>即某个字段能有多少位 </li>
<li>例如 int(128) 即此 int 类型 能有 128 位数字 00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001</li>
</ul>
<p>&#x3D;&#x3D;TODO：探究 字段长度 与 占用空间 的关系&#x3D;&#x3D;</p>
<p><strong>数据库字段属性</strong></p>
<p>Unsigned：</p>
<ul>
<li>无符号整数 –只有 整数类型可以使用</li>
<li>声明该列不能声明为负数</li>
</ul>
<p>zerofill：</p>
<ul>
<li>表示该列为0填充的</li>
<li>假设该列是长度为10 的 int 类型 输入 1 就会变成 0000000001 帮你自动填充补足 10 位</li>
</ul>
<p>自增：</p>
<ul>
<li><p><strong>AUTO_INCREMENT</strong> 通常理解为自增，自动在上一条记录的基础上+1</p>
</li>
<li><p><strong>通常用来设计唯一的主键 index 注意字段类型必须是整数型</strong></p>
</li>
<li><p>可以自定义设置主键自增的起始值和步长 –在新建表高级中设置 <code>自动增量</code> <code>平均行长度</code> 等 </p>
<p>对应sql语句 <code>AUTO_INCREMENT=128 AVG_ROW_LENGTH=2;</code></p>
</li>
</ul>
<p>非空：</p>
<ul>
<li>NOT NULL</li>
<li>或者将 默认改为null</li>
<li>假设设置为 not null，如何不给他赋值，就会报错</li>
</ul>
<p>默认：</p>
<ul>
<li>default</li>
<li>设置默认的值</li>
</ul>
<p><strong>拓展</strong> &#x3D;&#x3D;–实际开发项目中 每张表 都必须包含 以下五个字段 表示一条数据存在的意义 详细见阿里巴巴开发手册&#x3D;&#x3D;</p>
<ul>
<li>id –主键</li>
<li><code>version</code> –版本 主要用于 乐观锁</li>
<li>is_delete 用于伪删除</li>
<li>gmt_create 创建时间</li>
<li>gmt_update 修改时间</li>
</ul>
<h4 id="2-3-操作数据"><a href="#2-3-操作数据" class="headerlink" title="2.3 操作数据"></a>2.3 操作数据</h4><blockquote>
<p><strong>基础数据操作</strong></p>
</blockquote>
<p><strong>外键</strong></p>
<p><em>区分物理外键 与 逻辑外键</em></p>
<ul>
<li>物理外键 使用foreign key 作为外键关联另一张的字段的连接方法，而且&#x3D;&#x3D;限定了引擎为InnoDB&#x3D;&#x3D; –不推荐使用</li>
<li>逻辑外键 因为存在语法上的逻辑关联而产生的外键，&#x3D;&#x3D;需要有连接关键词inner join 或者left join 等等连接部分&#x3D;&#x3D;</li>
</ul>
<p>通常外键实践方式：</p>
<ul>
<li>数据库仅存单纯的表 用来存储数据 只有行-数据 列-字段</li>
<li>使用多张表来存储数据 而外键通过逻辑去实现</li>
</ul>
<p><strong>物理外键创建方式</strong></p>
<ul>
<li>在创建表时 创建外键约束 –相对较为麻烦和繁琐</li>
<li>创建表时不添加外键约束 在后期需要使用时再添加 外键关系</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 方式一 在创建表时 添加外键约束</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `grade`(</span><br><span class="line">`gradeid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;年级ID&#x27;</span>,</span><br><span class="line">`gradename` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级名称&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`gradeid`)</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 学生表的 gradeid 字段 引用年级表的 gradeid</span></span><br><span class="line"><span class="comment">-- 定义外键 key</span></span><br><span class="line"><span class="comment">-- 添加外键约束 -执行引用</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `student` (</span><br><span class="line">`id` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">`name` <span class="type">VARCHAR</span>(<span class="number">30</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;匿名&#x27;</span> COMMENT <span class="string">&#x27;姓名&#x27;</span>,</span><br><span class="line">`pwd` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;123456&#x27;</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">`sex` <span class="type">VARCHAR</span>(<span class="number">2</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="string">&#x27;男&#x27;</span> COMMENT <span class="string">&#x27;性别&#x27;</span>,</span><br><span class="line">`birthday` DATETIME <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出生日期&#x27;</span>,</span><br><span class="line">`gradeid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学生年级&#x27;</span>,</span><br><span class="line">`address` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;家庭住址&#x27;</span>,</span><br><span class="line">`email` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`id`),</span><br><span class="line">KEY `FK_gradeid` (`gradeid`),</span><br><span class="line"><span class="keyword">CONSTRAINT</span> `FK_gradeid` <span class="keyword">FOREIGN</span> KEY (`gradeid`) <span class="keyword">REFERENCES</span> `grade`(`gradeid`)</span><br><span class="line">)ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"><span class="comment">-- 存在外键约束引用的表不能被直接删除 -删除 主表 必须先删除 从表</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 方式二 在创建表时不添加外键约束 在后期需要使用时再添加 外键关系</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `student`</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> `FK_graderid` <span class="keyword">FOREIGN</span> KEY(`gradeid`) <span class="keyword">REFERENCES</span> `grade`(`gradeid`);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><em>&#x3D;&#x3D;物理外键为数据库级别的外键 会导致表关系特别混乱 不建议使用&#x3D;&#x3D;</em> </p>
<p>参考文档：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_43643214/article/details/117770449">https://blog.csdn.net/qq_43643214/article/details/117770449</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_54812545/article/details/116760281">https://blog.csdn.net/weixin_54812545/article/details/116760281</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30312659/article/details/97593832">https://blog.csdn.net/weixin_30312659/article/details/97593832</a></p>
<p><strong>DML语言</strong></p>
<p><em>数据管理 (操作) 语言</em><br>主要负责：增删改 –数据库意义：数据存储 数据管理</p>
<ul>
<li>INSERT</li>
<li>UPDATE</li>
<li>DELETE</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- INSERT</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `grade`(`gradename`) <span class="keyword">VALUE</span>(<span class="string">&#x27;大四&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 由于 主键自增 匹配省略 -如果不写表的字段 他就会根据表的列一一匹配</span></span><br><span class="line"><span class="comment">-- 通常写插入语句 一定要保持 字段 与 数据 一一对应</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `grade` <span class="keyword">VALUE</span>(<span class="number">2</span>, <span class="string">&#x27;大三&#x27;</span>);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `grade`(`gradeid`, `gradename`) <span class="keyword">VALUE</span>(<span class="number">3</span>, <span class="string">&#x27;大三&#x27;</span>);</span><br><span class="line"><span class="comment">-- 故以上两句 实际意义相同</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 一次性插入多条语句</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `grade`(`gradename`) <span class="keyword">VALUE</span>(<span class="string">&#x27;大四&#x27;</span>), (<span class="string">&#x27;大一&#x27;</span>)</span><br><span class="line"><span class="comment">-- 插入数据时 如果字段存在默认值 或 可以为空 则可以不插入值 如果无默认值且不可为空 则会报错</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `student`(`name`, `pwd`) <span class="keyword">VALUES</span>(<span class="string">&#x27;小明&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>), (<span class="string">&#x27;小红&#x27;</span>, <span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- UPDATE</span></span><br><span class="line"><span class="keyword">UPDATE</span> `student` <span class="keyword">SET</span> `name` <span class="operator">=</span> <span class="string">&#x27;林宇轩&#x27;</span> <span class="keyword">WHERE</span> `id` <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"><span class="comment">-- 不指定条件 默认将表中所有数据都进行改变</span></span><br><span class="line"><span class="keyword">UPDATE</span> `student` <span class="keyword">SET</span> `name` <span class="operator">=</span> <span class="string">&#x27;xiaoming&#x27;</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- DELETE</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `id` <span class="operator">=</span> <span class="number">6</span>;</span><br><span class="line"><span class="comment">-- 不指定条件 默认将表中数据全部删除</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> `student`</span><br><span class="line"><span class="comment">-- TRUNCATE 清空指定表中所有数据 不改变表结构 与 表索引</span></span><br><span class="line"><span class="keyword">TRUNCATE</span> `student`</span><br><span class="line"><span class="comment">-- TRUNCATE 与 DELETE 区别 </span></span><br><span class="line"><span class="comment">-- TRUNCATE 会归零主键自增 DELETE不会</span></span><br><span class="line"><span class="comment">-- TRUNCATE 会不会影响事务</span></span><br><span class="line"><span class="comment">-- 使用 DELETE 删除全部表数据后 重启数据库 INNODB自增列也会归零 因为其自增列存储在内存中 断电即失 而 MyISAM自增列不会归零 因为其自增列存储在文件中</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><em><strong>value  与 values 本质上没有区别 除拼写上</strong></em></p>
<p>**WHERE  后主要 使用 返回布尔值语句 **</p>
<div>
    <table>
        <thead>
            <td><b>操作符</b></td>
            <td><b>含义</b></td>
            <td><b>示例</b></td>
            <td><b>结果</b></td>
        </thead>
        <tbody>
            <tr>
                <td>=</td>
                <td>等于</td>
                <td>5 = 6</td>
                <td>false</td>
            </tr>
            <tr>
                <td><> 或 !=</td>
                <td>不等于</td>
                <td>5 <> 6</td>
                <td>true</td>
            </tr>
            <tr>
                <td>>=</td>
                <td>大于等于</td>
                <td>5 >= 1</td>
                <td>true</td>
            </tr>
            <tr>
                <td><=</td>
                <td>小于等于</td>
                <td>5 <= 6</td>
                <td>true</td>
            </tr>
            <tr>
                <td>></td>
                <td>大于</td>
                <td>5 > 1</td>
                <td>true</td>
            </tr>
            <tr>
                <td><</td>
                <td>小于</td>
                <td>7 < 1</td>
                <td>false</td>
            </tr>
            <tr>
                <td>between...and...</td>
                <td>[]</td>
                <td>2 between 2 and 2</td>
                <td>true</td>
            </tr>
            <tr>
                <td>AND</td>
                <td>与</td>
                <td>条件A AND 条件B</td>
                <td>满足两条件同时成立</td>
            </tr>
            <tr>
                <td>OR</td>
                <td>或</td>
                <td>条件A OR 条件B</td>
                <td>满足任意一条件成立</td>
            </tr>
        </tbody>
    </table>
</div>





<p><strong>DQL语言</strong></p>
<p><em>数据查询语言</em></p>
<p>数据库中的表达式：文本值  列  Null  函数  计算表达式  系统变量  ….</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> `school`;</span><br><span class="line"><span class="comment">-- 创建一个school数据库</span></span><br><span class="line">USE `school`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建年级表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `grade`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `grade`(</span><br><span class="line">`gradeid` <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;年级编号&#x27;</span>,</span><br><span class="line">`gradename` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级名称&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`gradeid`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">6</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入年级数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> grade (gradeid,gradename) <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">&#x27;大一&#x27;</span>),(<span class="number">2</span>,<span class="string">&#x27;大二&#x27;</span>),(<span class="number">3</span>,<span class="string">&#x27;大三&#x27;</span>),(<span class="number">4</span>,<span class="string">&#x27;大四&#x27;</span>),(<span class="number">5</span>,<span class="string">&#x27;预科班&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建成绩表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> <span class="keyword">result</span>;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">result</span>(</span><br><span class="line">studentno <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">subjectno <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程编号&#x27;</span>,</span><br><span class="line">examdate DATETIME <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;考试日期&#x27;</span>,</span><br><span class="line">studentresult <span class="type">INT</span> (<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;考试成绩&#x27;</span>,</span><br><span class="line">KEY subjectno (subjectno)</span><br><span class="line">)ENGINE <span class="operator">=</span> INNODB <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入成绩数据 这里仅插入了一组，其余自行添加</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> <span class="keyword">result</span>(studentno,subjectno,examdate,studentresult)</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1000</span>,<span class="number">1</span>,<span class="string">&#x27;2013-11-11 16:00:00&#x27;</span>,<span class="number">85</span>),</span><br><span class="line">(<span class="number">1000</span>,<span class="number">2</span>,<span class="string">&#x27;2013-11-12 16:00:00&#x27;</span>,<span class="number">70</span>),</span><br><span class="line">(<span class="number">1000</span>,<span class="number">3</span>,<span class="string">&#x27;2013-11-11 09:00:00&#x27;</span>,<span class="number">68</span>),</span><br><span class="line">(<span class="number">1000</span>,<span class="number">4</span>,<span class="string">&#x27;2013-11-13 16:00:00&#x27;</span>,<span class="number">98</span>),</span><br><span class="line">(<span class="number">1000</span>,<span class="number">5</span>,<span class="string">&#x27;2013-11-14 16:00:00&#x27;</span>,<span class="number">58</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建学生表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> `student`;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> student(</span><br><span class="line">studentno <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">loginpwd <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span>,</span><br><span class="line">studentname <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">sex TINYINT(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;性别，0或1&#x27;</span>,</span><br><span class="line">gradeid <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级编号&#x27;</span>,</span><br><span class="line">phone <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;联系电话，允许为空&#x27;</span>,</span><br><span class="line">address <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;地址，允许为空&#x27;</span>,</span><br><span class="line">borndate DATETIME <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出生时间&#x27;</span>,</span><br><span class="line">email <span class="type">VARCHAR</span> (<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱账号允许为空&#x27;</span>,</span><br><span class="line">identitycard <span class="type">VARCHAR</span>(<span class="number">18</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;身份证号&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (studentno),</span><br><span class="line"><span class="keyword">UNIQUE</span> KEY identitycard(identitycard),</span><br><span class="line">KEY email (email)</span><br><span class="line">)ENGINE<span class="operator">=</span>MYISAM <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入学生数据 其余自行添加 这里只添加了2行</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> student (studentno,loginpwd,studentname,sex,gradeid,phone,address,borndate,email,identitycard)</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1000</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;张伟&#x27;</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="string">&#x27;13800001234&#x27;</span>,<span class="string">&#x27;北京朝阳&#x27;</span>,<span class="string">&#x27;1980-1-1&#x27;</span>,<span class="string">&#x27;text123@qq.com&#x27;</span>,<span class="string">&#x27;123456198001011234&#x27;</span>),</span><br><span class="line">(<span class="number">1001</span>,<span class="string">&#x27;123456&#x27;</span>,<span class="string">&#x27;赵强&#x27;</span>,<span class="number">1</span>,<span class="number">3</span>,<span class="string">&#x27;13800002222&#x27;</span>,<span class="string">&#x27;广东深圳&#x27;</span>,<span class="string">&#x27;1990-1-1&#x27;</span>,<span class="string">&#x27;text111@qq.com&#x27;</span>,<span class="string">&#x27;123456199001011233&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建科目表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> SUBJECT;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> SUBJECT(</span><br><span class="line">subjectno <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;课程编号&#x27;</span>,</span><br><span class="line">subjectname <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;课程名称&#x27;</span>,</span><br><span class="line">classhour <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学时&#x27;</span>,</span><br><span class="line">gradeid <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级编号&#x27;</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (subjectno)</span><br><span class="line">)ENGINE <span class="operator">=</span> INNODB AUTO_INCREMENT <span class="operator">=</span> <span class="number">19</span> <span class="keyword">DEFAULT</span> CHARSET <span class="operator">=</span> utf8;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 插入科目数据</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SUBJECT(subjectno,subjectname,classhour,gradeid)<span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">1</span>,<span class="string">&#x27;高等数学-1&#x27;</span>,<span class="number">110</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="string">&#x27;高等数学-2&#x27;</span>,<span class="number">110</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">3</span>,<span class="string">&#x27;高等数学-3&#x27;</span>,<span class="number">100</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">4</span>,<span class="string">&#x27;高等数学-4&#x27;</span>,<span class="number">130</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="number">5</span>,<span class="string">&#x27;C语言-1&#x27;</span>,<span class="number">110</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">6</span>,<span class="string">&#x27;C语言-2&#x27;</span>,<span class="number">110</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">7</span>,<span class="string">&#x27;C语言-3&#x27;</span>,<span class="number">100</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">8</span>,<span class="string">&#x27;C语言-4&#x27;</span>,<span class="number">130</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="number">9</span>,<span class="string">&#x27;Java程序设计-1&#x27;</span>,<span class="number">110</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">10</span>,<span class="string">&#x27;Java程序设计-2&#x27;</span>,<span class="number">110</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">11</span>,<span class="string">&#x27;Java程序设计-3&#x27;</span>,<span class="number">100</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">12</span>,<span class="string">&#x27;Java程序设计-4&#x27;</span>,<span class="number">130</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="number">13</span>,<span class="string">&#x27;数据库结构-1&#x27;</span>,<span class="number">110</span>,<span class="number">1</span>),</span><br><span class="line">(<span class="number">14</span>,<span class="string">&#x27;数据库结构-2&#x27;</span>,<span class="number">110</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">15</span>,<span class="string">&#x27;数据库结构-3&#x27;</span>,<span class="number">100</span>,<span class="number">3</span>),</span><br><span class="line">(<span class="number">16</span>,<span class="string">&#x27;数据库结构-4&#x27;</span>,<span class="number">130</span>,<span class="number">4</span>),</span><br><span class="line">(<span class="number">17</span>,<span class="string">&#x27;C#基础&#x27;</span>,<span class="number">130</span>,<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- SELECT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student`</span><br><span class="line"><span class="comment">-- 使用别名查询 -可以给 查询结果起别名 给字段起别名 给表起别名</span></span><br><span class="line"><span class="keyword">SELECT</span> `studentno` `学号`, `loginpwd` `密码` <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">SELECT</span> `studentno` <span class="string">&#x27;学号&#x27;</span>, `loginpwd` <span class="string">&#x27;密码&#x27;</span> <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">SELECT</span> `studentno` <span class="keyword">AS</span> <span class="string">&#x27;学号&#x27;</span>, `loginpwd` <span class="keyword">AS</span> <span class="string">&#x27;密码&#x27;</span> <span class="keyword">FROM</span> student</span><br><span class="line"><span class="keyword">SELECT</span> `studentno` `学号`, `loginpwd` `密码` <span class="keyword">FROM</span> student <span class="keyword">AS</span> `s`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- DISTINCT 去重关键字 -作用 去除 SELECT 查询结果中重复的数据 (重复的数据只显示一条)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> `studentno` <span class="keyword">FROM</span> `<span class="keyword">result</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查询 MySQL 系统版本号 -函数</span></span><br><span class="line"><span class="keyword">SELECT</span> VERSION()</span><br><span class="line"><span class="comment">-- SELECT 计算结果 -表达式 (数据库列的表达式)</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="number">100</span><span class="operator">*</span><span class="number">4</span><span class="number">-23</span> <span class="keyword">AS</span> `计算结果`</span><br><span class="line"><span class="comment">-- 查询自增步长 -变量</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@auto</span>_increment_increment</span><br><span class="line"><span class="comment">-- 查询所有学生考试成绩 +1 后查看 -表达式</span></span><br><span class="line"><span class="keyword">SELECT</span> `studentno`, `studentresult` <span class="operator">+</span> <span class="number">1</span> <span class="keyword">AS</span> `校正后分数` <span class="keyword">FROM</span> `<span class="keyword">result</span>`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- WHERE 条件子句</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `<span class="keyword">result</span>` <span class="keyword">WHERE</span> `studentresult` <span class="keyword">BETWEEN</span> <span class="number">90</span> <span class="keyword">AND</span> <span class="number">99</span>;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `<span class="keyword">result</span>` <span class="keyword">WHERE</span> `studentresult` <span class="operator">&gt;=</span> <span class="number">90</span> <span class="keyword">OR</span> `studentresult` <span class="operator">&lt;=</span> <span class="number">99</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `<span class="keyword">result</span>` <span class="keyword">WHERE</span> <span class="operator">!</span>(`studentresult` <span class="operator">&gt;=</span> <span class="number">90</span>)</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `<span class="keyword">result</span>` <span class="keyword">WHERE</span> <span class="keyword">NOT</span> `studentresult` <span class="operator">&gt;=</span> <span class="number">90</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 比较运算符</span></span><br><span class="line"><span class="comment">-- IS NULL 匹配 NULL 或者 &#x27;&#x27; 空串</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `sex` <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `sex` <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `studentno` <span class="keyword">BETWEEN</span> <span class="number">1000</span> <span class="keyword">AND</span> <span class="number">1002</span></span><br><span class="line"><span class="comment">-- 模糊查询 LIKE 使用 通配符 % (匹配0到任意个字符) 与 _ (仅匹配一个字符) 通配符仅能在 LIKE 中使用</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `studentname` <span class="keyword">LIKE</span> <span class="string">&#x27;%张%&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `studentname` <span class="keyword">LIKE</span> <span class="string">&#x27;张%&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `studentname` <span class="keyword">LIKE</span> <span class="string">&#x27;%张&#x27;</span></span><br><span class="line"><span class="comment">-- SELECT * FROM `student`</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `studentname` <span class="keyword">LIKE</span> <span class="string">&#x27;%%&#x27;</span></span><br><span class="line"><span class="comment">-- IN</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> `studentno` <span class="keyword">IN</span> (<span class="number">1001</span>, <span class="number">1002</span>, <span class="number">1011</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 联表查询 JOIN=INNER JOIN  LEFT JOIN  INNER JOIN  RIGHT JOIN -七大联表查询</span></span><br><span class="line"><span class="comment">-- 涉及到联表查询 通常需要分析需求 1. 分析查询字段都来自哪张表 2. 分析确定使用哪种连接查询(7种) 3. 确定表之间的交叉点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- INNER JOIN</span></span><br><span class="line"><span class="keyword">SELECT</span> s.`studentno`, `studentname`, `subjectno`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> r</span><br><span class="line"><span class="keyword">ON</span> s.`studentno` <span class="operator">=</span> r.`studentno`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- RIGHT JOIN</span></span><br><span class="line"><span class="keyword">SELECT</span> s.`studentno`, `studentname`, `subjectno`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> s</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> r</span><br><span class="line"><span class="keyword">ON</span> s.`studentno` <span class="operator">=</span> r.`studentno`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- LEFT JOIN</span></span><br><span class="line"><span class="keyword">SELECT</span> s.`studentno`, `studentname`, `subjectno`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> r</span><br><span class="line"><span class="keyword">ON</span> s.`studentno` <span class="operator">=</span> r.`studentno`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- JOIN ON -连接查询</span></span><br><span class="line"><span class="comment">-- WHERE -等值查询</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 复杂查询案例</span></span><br><span class="line"><span class="comment">-- 查询 参加了考试的学生信息：学号 学生姓名 科目名 分数</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.`studentno`, `studentname`, `subjectname`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> res</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> stu.`studentno`</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> res.`subjectno` <span class="operator">=</span> sub.`subjectno`</span><br><span class="line"><span class="keyword">WHERE</span> res.`studentresult` <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="comment">-- 查询学员所属年级 学生信息：学号 学生姓名 年级姓名</span></span><br><span class="line"><span class="keyword">SELECT</span> `studentno`, `studentname`, `gradename`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `grade` <span class="keyword">AS</span> g</span><br><span class="line"><span class="keyword">ON</span> s.`gradeid` <span class="operator">=</span> g.`gradeid`</span><br><span class="line"><span class="comment">-- 查询学生考试成绩</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.`studentno`, `studentname`, `subjectname`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> res</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> stu.`studentno`</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> sub.`subjectno` <span class="operator">=</span> res.`subjectno`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 自连接</span></span><br><span class="line"><span class="comment">-- 表自身 关联自身</span></span><br><span class="line"><span class="comment">-- 创建示例表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `category`(</span><br><span class="line">  `categoryid` <span class="type">INT</span>(<span class="number">10</span>) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;主题id&#x27;</span>,</span><br><span class="line">  `pid` <span class="type">INT</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;父id&#x27;</span>,</span><br><span class="line">  `categoryname` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;主题名字&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`categoryid`) </span><br><span class="line"> ) ENGINE<span class="operator">=</span>INNODB  AUTO_INCREMENT<span class="operator">=</span><span class="number">9</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8; </span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `category` (`categoryid`, `pid`, `categoryname`) </span><br><span class="line"><span class="keyword">VALUES</span> (<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;信息技术&#x27;</span>), </span><br><span class="line">(<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;软件开发&#x27;</span>), </span><br><span class="line">(<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;美术设计&#x27;</span>), </span><br><span class="line">(<span class="string">&#x27;4&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;数据库&#x27;</span>), </span><br><span class="line">(<span class="string">&#x27;8&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;办公信息&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;6&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;web开发&#x27;</span>),</span><br><span class="line">(<span class="string">&#x27;7&#x27;</span>,<span class="string">&#x27;5&#x27;</span>,<span class="string">&#x27;ps技术&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 自连接案例 按标签子父级关系展示数据库信息</span></span><br><span class="line"><span class="keyword">SELECT</span> cb.`categoryid`, ca.`categoryname` <span class="keyword">AS</span> <span class="string">&#x27;父栏目&#x27;</span>, cb.`categoryname` <span class="keyword">AS</span> <span class="string">&#x27;子栏目&#x27;</span></span><br><span class="line"><span class="keyword">FROM</span> `category` <span class="keyword">AS</span> ca, `category` <span class="keyword">AS</span> cb</span><br><span class="line"><span class="keyword">WHERE</span> ca.`categoryid` <span class="operator">=</span> cb.`pid`</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 分页 LIMIT 和 排序 ORDER BY </span></span><br><span class="line"><span class="comment">-- 降序</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.`studentno`, `studentname`, `subjectname`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> res</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> stu.`studentno`</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> sub.`subjectno` <span class="operator">=</span> res.`subjectno`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> `studentresult` <span class="keyword">DESC</span></span><br><span class="line"><span class="comment">-- 升序</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.`studentno`, `studentname`, `subjectname`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> res</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> stu.`studentno`</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> sub.`subjectno` <span class="operator">=</span> res.`subjectno`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> `studentresult` <span class="keyword">ASC</span></span><br><span class="line"><span class="comment">-- 分页</span></span><br><span class="line"><span class="comment">-- LIMIT STARTVALUE, PAGESIZE</span></span><br><span class="line"><span class="comment">-- 分页 1-5</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.`studentno`, `studentname`, `subjectname`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> res</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> stu.`studentno`</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> sub.`subjectno` <span class="operator">=</span> res.`subjectno`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> `studentresult` <span class="keyword">ASC</span></span><br><span class="line">LIMIT <span class="number">0</span>, <span class="number">5</span></span><br><span class="line"><span class="comment">-- 分页 2-6</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.`studentno`, `studentname`, `subjectname`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> res</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> stu.`studentno`</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> sub.`subjectno` <span class="operator">=</span> res.`subjectno`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> `studentresult` <span class="keyword">ASC</span></span><br><span class="line">LIMIT <span class="number">1</span>, <span class="number">5</span></span><br><span class="line"><span class="comment">-- 分页 1-6</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.`studentno`, `studentname`, `subjectname`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> res</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> stu.`studentno`</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> sub.`subjectno` <span class="operator">=</span> res.`subjectno`</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> `studentresult` <span class="keyword">ASC</span></span><br><span class="line">LIMIT <span class="number">0</span>, <span class="number">6</span></span><br><span class="line"><span class="comment">-- 第 n 页 LIMIT (n - 1) * PAGESIZE, PAGESIZE</span></span><br><span class="line"><span class="comment">-- 总页数 COUNT / PAGESIZE</span></span><br><span class="line"><span class="comment">-- 查询示例 Java 第一学年 成绩排名前十的学生 且分数大于80的学生信息 -学号 姓名 课程名称 分数</span></span><br><span class="line"><span class="keyword">SELECT</span> stu.`studentno`, `studentname`, `subjectname`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `student` <span class="keyword">AS</span> stu</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `<span class="keyword">result</span>` <span class="keyword">AS</span> res</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> stu.`studentno`</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> sub.`subjectno` <span class="operator">=</span> res.`subjectno`</span><br><span class="line"><span class="keyword">WHERE</span> sub.`subjectname` <span class="operator">=</span> <span class="string">&#x27;Java程序设计-1&#x27;</span> <span class="keyword">AND</span> studentresult <span class="operator">&gt;</span> <span class="number">80</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> `studentresult` <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">0</span>, <span class="number">10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 子查询 与 嵌套查询</span></span><br><span class="line"><span class="comment">-- 由里及外查询</span></span><br><span class="line"><span class="keyword">SELECT</span> `studentno`, `subjectno`, `studentresult`</span><br><span class="line"><span class="keyword">FROM</span> `<span class="keyword">result</span>`</span><br><span class="line"><span class="keyword">WHERE</span> `subjectno` <span class="operator">=</span> (</span><br><span class="line">	<span class="keyword">SELECT</span> `subjectno` <span class="keyword">FROM</span> `subject`</span><br><span class="line">	<span class="keyword">WHERE</span> `subjectname` <span class="keyword">LIKE</span> <span class="string">&#x27;%数据结构%&#x27;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- MySQL 函数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 数学函数</span></span><br><span class="line"><span class="comment">-- 取绝对值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-10</span>)</span><br><span class="line"><span class="comment">-- 向上取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CEILING</span>(<span class="number">9.3</span>)</span><br><span class="line"><span class="comment">-- 向下取整</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">FLOOR</span>(<span class="number">9.5</span>)</span><br><span class="line"><span class="comment">-- 0-1随机数</span></span><br><span class="line"><span class="keyword">SELECT</span> RAND()</span><br><span class="line"><span class="comment">-- 判断符号</span></span><br><span class="line"><span class="keyword">SELECT</span> SIGN(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 操作字符串函数</span></span><br><span class="line"><span class="comment">-- 字符串长度</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">CHAR_LENGTH</span>(<span class="string">&#x27;Linyuxuan&#x27;</span>)</span><br><span class="line"><span class="comment">-- 拼接字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;ni&#x27;</span>, <span class="string">&#x27;hao&#x27;</span>, <span class="string">&#x27;ma&#x27;</span>)</span><br><span class="line"><span class="comment">-- CONCAT(a, b, ...) 拼接字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;学生信息:&#x27;</span>, `studentno`, `studentname`) <span class="keyword">AS</span> `STUDENTINFO` <span class="keyword">FROM</span> `student`;</span><br><span class="line"><span class="comment">-- 插入字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">INSERT</span>(<span class="string">&#x27;aaaaaaaaaa&#x27;</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="string">&#x27;bbbb&#x27;</span>)</span><br><span class="line"><span class="comment">-- 转小写</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOWER</span>(<span class="string">&#x27;dDDDdddd&#x27;</span>)</span><br><span class="line"><span class="comment">-- 转大写</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">UPPER</span>(<span class="string">&#x27;eeeerrFFFGGG&#x27;</span>)</span><br><span class="line"><span class="comment">-- 返回首次出现子串索引</span></span><br><span class="line"><span class="keyword">SELECT</span> INSTR(<span class="string">&#x27;ddeerr&#x27;</span>, <span class="string">&#x27;e&#x27;</span>)</span><br><span class="line"><span class="comment">-- 替换字符串</span></span><br><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;qwerwryrturwr&#x27;</span>, <span class="string">&#x27;qwer&#x27;</span>, <span class="string">&#x27;hhhhh&#x27;</span>)</span><br><span class="line"><span class="comment">-- 提取子串</span></span><br><span class="line"><span class="keyword">SELECT</span> SUBSTR(<span class="string">&#x27;dddddssssssss&#x27;</span>, <span class="number">2</span>, <span class="number">6</span>)</span><br><span class="line"><span class="comment">-- 反转</span></span><br><span class="line"><span class="keyword">SELECT</span> REVERSE(<span class="string">&#x27;qwertyuiop&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 时间日期函数 -常用</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span>()</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">CURRENT_DATE</span></span><br><span class="line"><span class="keyword">SELECT</span> CURDATE()</span><br><span class="line"><span class="keyword">SELECT</span> NOW()</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">LOCALTIME</span>()</span><br><span class="line"><span class="keyword">SELECT</span> SYSDATE()</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">YEAR</span>(NOW())</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MONTH</span>(NOW())</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DAY</span>(NOW())</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">HOUR</span>(NOW())</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MINUTE</span>(NOW())</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SECOND</span>(NOW())</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 系统</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SYSTEM_USER</span>()</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>()</span><br><span class="line"><span class="keyword">SELECT</span> VERSION()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 聚合函数 -常用</span></span><br><span class="line"><span class="comment">-- COUNT(字段) -忽略所有 NULL 值</span></span><br><span class="line"><span class="comment">-- COUNT(*) -不会忽略 NULL 值</span></span><br><span class="line"><span class="comment">-- COUNT(1) -不会忽略 NULL 值</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(`studentresult`) <span class="keyword">FROM</span> `<span class="keyword">result</span>` </span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(`studentresult`) <span class="keyword">FROM</span> `<span class="keyword">result</span>` </span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(`studentresult`) <span class="keyword">FROM</span> `<span class="keyword">result</span>` </span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(`studentresult`) <span class="keyword">FROM</span> `<span class="keyword">result</span>` </span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(`studentresult`) <span class="keyword">FROM</span> `<span class="keyword">result</span>` </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 分组依据</span></span><br><span class="line"><span class="comment">-- 分组后满足条件</span></span><br><span class="line"><span class="keyword">SELECT</span> `subjectname`, </span><br><span class="line"><span class="built_in">AVG</span>(`studentresult`) <span class="keyword">AS</span> 平均分,</span><br><span class="line"><span class="built_in">MAX</span>(`studentresult`) <span class="keyword">AS</span> 最高分,</span><br><span class="line"><span class="built_in">MIN</span>(`studentresult`) <span class="keyword">AS</span> 最低分</span><br><span class="line"><span class="keyword">FROM</span> `<span class="keyword">result</span>` res</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> `subject` <span class="keyword">AS</span> sub</span><br><span class="line"><span class="keyword">ON</span> res.`studentno` <span class="operator">=</span> sub.`subjectno`</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> res.`studentno`</span><br><span class="line"><span class="keyword">HAVING</span> 平均分 <span class="operator">&gt;</span> <span class="number">80</span></span><br><span class="line"><span class="comment">-- 注意表结构</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>COUNT(字段) COUNT(*) 与 COUNT(1) 效率问题</strong> <a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1728733605304857364&wfr=spider&for=pc">参考文档</a></p>
<p>MySQL 函数查询文档：<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc">https://dev.mysql.com/doc</a></p>
<p><strong>TODO 子查询 中<code>exists</code> <code>in</code> 等的应用</strong></p>
<p>&#x3D;&#x3D;TODO 分页与瀑布流 的 应用与特点&#x3D;&#x3D;</p>
<p>MySQL 官方 –SELECT Statement</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    [<span class="keyword">ALL</span> <span class="operator">|</span> <span class="keyword">DISTINCT</span> <span class="operator">|</span> DISTINCTROW ]</span><br><span class="line">    [HIGH_PRIORITY]</span><br><span class="line">    [STRAIGHT_JOIN]</span><br><span class="line">    [SQL_SMALL_RESULT] [SQL_BIG_RESULT] [SQL_BUFFER_RESULT]</span><br><span class="line">    [SQL_CACHE <span class="operator">|</span> SQL_NO_CACHE] [SQL_CALC_FOUND_ROWS]</span><br><span class="line">    select_expr [, select_expr] ...</span><br><span class="line">    [into_option]</span><br><span class="line">    [<span class="keyword">FROM</span> table_references</span><br><span class="line">      [<span class="keyword">PARTITION</span> partition_list]]</span><br><span class="line">    [<span class="keyword">WHERE</span> where_condition]</span><br><span class="line">    [<span class="keyword">GROUP</span> <span class="keyword">BY</span> &#123;col_name <span class="operator">|</span> expr <span class="operator">|</span> position&#125;</span><br><span class="line">      [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>], ... [<span class="keyword">WITH</span> <span class="keyword">ROLLUP</span>]]</span><br><span class="line">    [<span class="keyword">HAVING</span> where_condition]</span><br><span class="line">    [<span class="keyword">ORDER</span> <span class="keyword">BY</span> &#123;col_name <span class="operator">|</span> expr <span class="operator">|</span> position&#125;</span><br><span class="line">      [<span class="keyword">ASC</span> <span class="operator">|</span> <span class="keyword">DESC</span>], ...]</span><br><span class="line">    [LIMIT &#123;[<span class="keyword">offset</span>,] row_count <span class="operator">|</span> row_count <span class="keyword">OFFSET</span> <span class="keyword">offset</span>&#125;]</span><br><span class="line">    [<span class="keyword">PROCEDURE</span> procedure_name(argument_list)]</span><br><span class="line">    [into_option]</span><br><span class="line">    [<span class="keyword">FOR</span> <span class="keyword">UPDATE</span> <span class="operator">|</span> LOCK <span class="keyword">IN</span> SHARE MODE]</span><br><span class="line"></span><br><span class="line">into_option: &#123;</span><br><span class="line">    <span class="keyword">INTO</span> OUTFILE <span class="string">&#x27;file_name&#x27;</span></span><br><span class="line">        [<span class="type">CHARACTER</span> <span class="keyword">SET</span> charset_name]</span><br><span class="line">        export_options</span><br><span class="line">  <span class="operator">|</span> <span class="keyword">INTO</span> DUMPFILE <span class="string">&#x27;file_name&#x27;</span></span><br><span class="line">  <span class="operator">|</span> <span class="keyword">INTO</span> var_name [, var_name] ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 化简</span></span><br><span class="line"><span class="keyword">SELECT</span>[<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span><span class="operator">|</span>DISTINCTROW<span class="operator">|</span>TOP]</span><br><span class="line">&#123;<span class="operator">*</span> <span class="operator">|</span> talbe.<span class="operator">*</span> <span class="operator">|</span> [table.field1][<span class="keyword">AS</span> alias1][,[table.field2][<span class="keyword">AS</span> alias2][,…]]&#125;</span><br><span class="line"><span class="keyword">FROM</span> [tableexpression,…][<span class="keyword">IN</span> externaldatabase][<span class="keyword">AS</span> alias]</span><br><span class="line">	[<span class="keyword">left</span>][<span class="keyword">right</span>][<span class="keyword">inner</span> <span class="keyword">join</span> table_name2] <span class="comment">-- 联合查询 join on</span></span><br><span class="line">	[<span class="keyword">WHERE</span>…]  <span class="comment">-- 指定结果需满足的要求</span></span><br><span class="line">	[<span class="keyword">GROUP</span> <span class="keyword">BY</span>…]  <span class="comment">-- 指定结果按照哪几个字段来分组 </span></span><br><span class="line">	[<span class="keyword">HAVING</span>…]  <span class="comment">-- 过略分组的记录必须满足的次要条件</span></span><br><span class="line">	[<span class="keyword">ORDER</span> <span class="keyword">BY</span>…] <span class="comment">-- 指定查询记录按一个或多个条件排序</span></span><br><span class="line">	[LIMIT &#123;[<span class="keyword">offset</span>,]row_count <span class="operator">|</span> row_countOFFSET <span class="keyword">offset</span>&#125;];<span class="comment">-- 指定查询的记录从哪条至哪条</span></span><br><span class="line">	[<span class="keyword">WITH</span> OWNERACCESS OPTION]</span><br><span class="line"><span class="comment">-- 用中括号([])括起来的部分表示是可选的，用大括号(&#123;&#125;)括起来的部分是表示必须从中选择其中的一个。</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<img src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/image-20221021180428225.png" alt="image-20221021180428225" style="zoom:67%; margin-left: 0" />

<p>INNER JOIN  LEFT JOIN  RIGHT JOIN 区别</p>
<div>
    <table>
        <thead>
            <td><b>操作</b></td>
            <td><b>描述</b></td>
        </thead>
        <tbody>
            <tr>
                <td>INNER JOIN</td>
                <td>表中至少要有一行能匹配 才返回行 否则返回空</td>
            </tr>
            <tr>
                <td>LEFT JOIN</td>
                <td>从左表中判断返回所有值 即使右表中没有相对应匹配的值</td>
            </tr>
            <tr>
                <td>RIGHT JOIN</td>
                <td>从右表中判断返回所有值 即使左表中没有相对应匹配的值</td>
            </tr>
        </tbody>
    </table>
</div>



<p><strong>MySQL 版本导致 MySQL5.7.5后only_full_group_by成为sql_mode的默认选项之一，这可能导致一些sql语句失效</strong></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/study_in/article/details/92625397">参考文档</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/ITxiaofeixiang/article/details/115635602">参考文档</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/study_in/article/details/92625397">参考文档</a></p>
<blockquote>
<p> <strong>对比 子查询 与 联表查询 优劣</strong></p>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/434989888">https://zhuanlan.zhihu.com/p/434989888</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_43597208/article/details/105464756">https://blog.csdn.net/weixin_43597208/article/details/105464756</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/rod0320/article/details/109549303">https://blog.csdn.net/rod0320/article/details/109549303</a></p>
<h3 id="3-数据库引擎"><a href="#3-数据库引擎" class="headerlink" title="3. 数据库引擎"></a>3. 数据库引擎</h3><blockquote>
<p><strong>数据库引擎介绍</strong></p>
</blockquote>
<p>INNODB – MySQL 5.7 或 8.1 都默认使用INNODB</p>
<p>MyISAM – MySQL 5 之前 早些年使用的数据库引擎</p>
<p>对比数据库引擎 INNODB 与 MyISAM </p>
<div>
    <table>
        <thead>
            <td></td>
            <td><b>MyISAM</b></td>
            <td><b>INNODB</b></td>
        </thead>
        <tbody>
        <tr>
            <td>事务支持</td>
            <td>不支持</td>
            <td>支持</td>
        </tr>
        <tr>
            <td>数据行锁定</td>
            <td>不支持 --通常为数据表锁定</td>
            <td>支持 --能精准到数据行锁定 从而减少开销</td>
        </tr>
        <tr>
            <td>外键约束</td>
            <td>不支持</td>
            <td>支持</td>
        </tr>
        <tr>
            <td>全文索引</td>
            <td>支持</td>
            <td>不支持</td>
        </tr>
        <tr>
            <td>表空间大小</td>
            <td>较小</td>
            <td>较大 --通常为MyISAM 表空占用的两倍</td>
        </tr>
        </tbody>
    </table>
</div>

<p>总结：</p>
<ul>
<li>MyISAM  节约空间 速度较快</li>
<li>INNODB  安全性更高 支持事务处理 支持多表多用户操作</li>
</ul>
<blockquote>
<p><strong>MySQL 数据库引擎 在物理文件上的 区别</strong></p>
</blockquote>
<p><em>&#x3D;&#x3D;关于 MySQL 数据库 所有的数据文件都是存储在 data 目录下&#x3D;&#x3D;</em></p>
<p><em>&#x3D;&#x3D;故而  数据库存储的本质还是 文件存储&#x3D;&#x3D;</em></p>
<p><em>每个创建的数据库 在MySQ根目录&#x2F;Data&#x2F; 目录中都会创建一个文件夹 &#x3D; 数据库名称</em></p>
<p>MySQL 数据库引擎物理存储文件区别</p>
<ul>
<li><p>INNODB</p>
<p>在数据库对应物理文件夹中 只有一个<code>*.frm</code> <strong>–对应表结构的定义文件</strong>，以及上级目录下的<code>ibdata1</code>文件中 存有相关信息</p>
<p>其余文件均用于备份等其他用途</p>
</li>
<li><p>MyISAM </p>
<ul>
<li><code>*.frm</code> <strong>–对应表结构的定义文件</strong></li>
<li>*. MYD –数据文件 对应表中数据 –mydata</li>
<li>*.MYI –索引文件 对应表中索引 –myindex</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>数据库表的字符集编码</strong></p>
</blockquote>
<p>创建表时 执行 <code>CHARSET=utf8</code> 设置数据库表的字符集编码</p>
<p>若不设置 将使用MySQL 默认的字符集编码 –MySQL默认字符集编码不支持中文</p>
<p><strong>关于mysql的默认字符编码的设置（my.ini设置字符编码）</strong></p>
<p>参考博客：</p>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/ec0c86ee3e04">https://www.jianshu.com/p/ec0c86ee3e04</a></p>
<blockquote>
<p><strong>不同数据库引擎与字符集对数据类型的影响</strong></p>
</blockquote>
<p>实践出真知，任何人说的知识点都要思考，必要的时候自己检验一番。</p>
<p>表字段限制：</p>
<p>存储引擎 INNODB，字段个数：1017；</p>
<p>存储引擎 MyISAM，字段个数：2598。</p>
<p>表字段长度限制：</p>
<p>字符集：UTF8，测试字段：varchar，字段长度上限： 21844;</p>
<p>字符集：latin1，测试字段：varchar，字段长度上限： 65532。</p>
<p>参考博客：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39824033/article/details/111833697">https://blog.csdn.net/weixin_39824033/article/details/111833697</a></p>
<p>主要看下面一篇</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yaruli/article/details/79187814">https://blog.csdn.net/yaruli/article/details/79187814</a></p>
<p><em>非大字段类型的字段的bytes总和（即定义的字段的length的总合）大于64K了 （自己相加的话可能感觉没大于65535，但是字符类型若为gbk，每个字符最多占2个字，字符类型若为utf8，每个字符最多占3个字节）</em></p>
<p>innoDB改为MyISAM （INNODB是表类型，支持事务，myisam也是表类型，不过不支持事务）（未测试）</p>
<p><strong>TODO查看每种数据类型 在不同引擎 与 字符集下的 最大内存占用 text -4G 等</strong></p>
<p>查看某字段&#x3D;&#x3D;实际可使用最大长度&#x3D;&#x3D; 的sql语句</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(length(字段名)) <span class="keyword">from</span> 表名;</span><br></pre></td></tr></table></figure>



<h3 id="4-数据库级别加密"><a href="#4-数据库级别加密" class="headerlink" title="4. 数据库级别加密"></a>4. 数据库级别加密</h3><blockquote>
<p><strong>MD5加密</strong></p>
</blockquote>
<p>MD5加密不可逆</p>
<p>使用MD5加密目的 <strong>主要增强 算法复杂度 和 不可逆性</strong></p>
<p>在线破解 MD5 加密原理 使用 MD5 匹配字典 进行 MD5 加密后值的匹配 返回加密前的值 –暴力破解</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> `<span class="keyword">user</span>` <span class="keyword">SET</span> `password` <span class="operator">=</span> MD5(`password`) <span class="keyword">WHERE</span> `id` <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<p>用户校验方式：&#x3D;&#x3D;将用户传递进来的密码 进行 MD5 加密 后 比对加密后的值&#x3D;&#x3D;</p>
<h3 id="5-事务"><a href="#5-事务" class="headerlink" title="5. 事务"></a>5. 事务</h3><blockquote>
<p><strong>事务ACID原则</strong></p>
</blockquote>
<p><strong>ACID原则</strong></p>
<ul>
<li>原子性 atomicity<br>事务的操作步骤 只能同时全部成功 或者 全部失败 –即一旦失败就全部失败</li>
<li>一致性 consistency<br>事务起始 与 事务致性 保持逻辑一致 –表示事务结束后数据符合预期结果 且整体一致</li>
<li>隔离性 isolation<br>两组事务针对同一数据进行操作时 数据库会提供隔离关系 使其互不影响 </li>
<li>持久性 durability<br>在事务提交之前 即使操作在中途 失败 或 中断 都不会影响数据本身 –事务没有提交则恢复到原状 事务提交则持久化到数据库</li>
</ul>
<p>事务的隔离级别：</p>
<ul>
<li>脏读<br><strong>A事务 读取了 B事务 尚未提交 ( 或 未回滚 ) 的数据</strong></li>
<li>不可重复读<br><strong>A事务 读取一条数据 在执行逻辑的时 B事务 将这条数据改变了 (已提交 B事务) 当 A事务 再次读取数据的时候 发现数据不匹配 称为不可重复读</strong></li>
<li>幻读 ( 虚读 )<br><strong>A事务 先根据条件索引得到n条数据 后 B事务 在这n条数据之外 增添或修改 m条数据 导致这m条数据 符合 A事务 的搜索条件 使得 A事务 再次搜索会发现有 n+m 条数据 称为幻读</strong></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Oct31_Dec25/article/details/89286312">参考文档</a></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- MySQL 默认开启事务自动提交</span></span><br><span class="line"><span class="comment">-- 关闭事务自动提交</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span></span><br><span class="line"><span class="comment">-- 开启事务自动提交</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看全局变量</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@autocommit</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 事务开启</span></span><br><span class="line"><span class="comment">-- 标记一个事务的开始 从 START 后的 sql 都在同一个事务内</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION</span><br><span class="line"><span class="keyword">INSERT</span> ....</span><br><span class="line"><span class="keyword">INSERT</span> ....</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 提交</span></span><br><span class="line"><span class="keyword">COMMIT</span></span><br><span class="line"><span class="comment">-- 回滚 -事务执行中途失败</span></span><br><span class="line"><span class="keyword">ROLLBACK</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 设置事务保存点</span></span><br><span class="line"><span class="keyword">SAVEPOINT</span> .... </span><br><span class="line"></span><br><span class="line"><span class="comment">-- 回滚到保存点</span></span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> <span class="keyword">SAVEPOINT</span> ....</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除事务保存点</span></span><br><span class="line"><span class="keyword">RELEASE</span> <span class="keyword">SAVEPOINT</span> ....</span><br><span class="line"></span><br><span class="line"><span class="comment">/*[22:13:58][74 ms]*/</span> <span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `school`.`<span class="keyword">user</span>` <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> `money` <span class="type">INT</span>(<span class="number">128</span>) <span class="keyword">DEFAULT</span> <span class="number">0</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;用户财产&#x27;</span> AFTER `email`; </span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;%storage_engine%&#x27;</span>;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `<span class="keyword">user</span>`;</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> DATABASE `school`;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 事务案例 -默认转账</span></span><br><span class="line"><span class="keyword">SELECT</span> @<span class="variable">@autocommit</span></span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">UPDATE</span> `<span class="keyword">user</span>` <span class="keyword">SET</span> `money` <span class="operator">=</span> `money` <span class="operator">+</span> <span class="number">200</span> <span class="keyword">WHERE</span> `id` <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> `<span class="keyword">user</span>` <span class="keyword">SET</span> `money` <span class="operator">=</span> `money` <span class="operator">-</span> <span class="number">200</span> <span class="keyword">WHERE</span> `id` <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br></pre></td></tr></table></figure>



<h3 id="6-索引"><a href="#6-索引" class="headerlink" title="6. 索引"></a>6. 索引</h3><p>MySQL官方对索引的定义为：索引（Index）是帮助MySQL高效获取数据的数据结构。提取句子主干，就可以得到索引的本质：索引是数据结构</p>
<blockquote>
<p><strong>索引分类</strong></p>
</blockquote>
<p>索引分类</p>
<p>在一个表中 主键索引只能有一个 唯一索引可以有多个</p>
<ul>
<li>主键索引<br>表数据的唯一标识 主键不可重复 只能存在一个列作为主键</li>
<li>唯一索引<br>为避免重复列的出现 唯一索引可存在多个 且可重复设置 多个列都可以标识为 唯一索引</li>
<li>常规索引<br>默认索引 –不区分设置 默认使用常规索引 使用 index 或 key 关键字来设置</li>
<li>全文索引<br>作用域为全文 快速定位数据</li>
</ul>
<blockquote>
<p><strong>索引原则</strong></p>
</blockquote>
<blockquote>
<p><strong>索引操作</strong></p>
</blockquote>
<p><strong>索引操作</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 索引创建</span></span><br><span class="line"><span class="comment">-- 在创建表时 给字段添加索引</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `student` (</span><br><span class="line">  `studentno` <span class="type">INT</span>(<span class="number">4</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT COMMENT <span class="string">&#x27;学号&#x27;</span>,</span><br><span class="line">  `loginpwd` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">  `studentname` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;学生姓名&#x27;</span>,</span><br><span class="line">  `sex` TINYINT(<span class="number">1</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;性别，0或1&#x27;</span>,</span><br><span class="line">  `gradeid` <span class="type">INT</span>(<span class="number">11</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;年级编号&#x27;</span>,</span><br><span class="line">  `phone` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;联系电话，允许为空&#x27;</span>,</span><br><span class="line">  `address` <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;地址，允许为空&#x27;</span>,</span><br><span class="line">  `borndate` DATETIME <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;出生时间&#x27;</span>,</span><br><span class="line">  `email` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;邮箱账号允许为空&#x27;</span>,</span><br><span class="line">  `identitycard` <span class="type">VARCHAR</span>(<span class="number">18</span>) <span class="keyword">DEFAULT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;身份证号&#x27;</span>,</span><br><span class="line">  <span class="keyword">PRIMARY</span> KEY (`studentno`),</span><br><span class="line">  <span class="keyword">UNIQUE</span> KEY `identitycard` (`identitycard`),</span><br><span class="line">  KEY `email` (`email`),</span><br><span class="line">  FULLTEXT KEY `studentname` (`studentname`)</span><br><span class="line">) ENGINE<span class="operator">=</span>MYISAM AUTO_INCREMENT<span class="operator">=</span><span class="number">1013</span> <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8</span><br><span class="line"><span class="comment">-- 创建表后 给字段添加索引</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> `school`.`student` <span class="keyword">ADD</span> FULLTEXT INDEX `studentname`(`studentname`)</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 显示所有索引信息</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> `student`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- EXPLAIN 分析sql的执行情况</span></span><br><span class="line"><span class="comment">-- 非全文索引</span></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` </span><br><span class="line"></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `student` <span class="keyword">WHERE</span> <span class="keyword">MATCH</span>(`studentname`) AGAINST(<span class="string">&#x27;张&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>测试索引</strong></p>
</blockquote>
<p>插入 100万 数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建 `app_user` 表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> `app_user` (</span><br><span class="line">`id` <span class="type">BIGINT</span>(<span class="number">20</span>) UNSIGNED <span class="keyword">NOT</span> <span class="keyword">NULL</span> AUTO_INCREMENT,</span><br><span class="line">`name` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">DEFAULT</span><span class="string">&#x27;&#x27;</span> COMMENT<span class="string">&#x27;用户昵称&#x27;</span>,</span><br><span class="line">`email` <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT<span class="string">&#x27;用户邮箱&#x27;</span>,</span><br><span class="line">`phone` <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">DEFAULT</span><span class="string">&#x27;&#x27;</span> COMMENT<span class="string">&#x27;手机号&#x27;</span>,</span><br><span class="line">`gender` TINYINT(<span class="number">4</span>) UNSIGNED <span class="keyword">DEFAULT</span> <span class="string">&#x27;0&#x27;</span>COMMENT <span class="string">&#x27;性别（0：男;1:女）&#x27;</span>,</span><br><span class="line">`password` <span class="type">VARCHAR</span>(<span class="number">100</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> COMMENT <span class="string">&#x27;密码&#x27;</span>,</span><br><span class="line">`age` TINYINT(<span class="number">4</span>) <span class="keyword">DEFAULT</span><span class="string">&#x27;0&#x27;</span>  COMMENT <span class="string">&#x27;年龄&#x27;</span>,</span><br><span class="line">`create_time` DATETIME <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line">`update_time` <span class="type">TIMESTAMP</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span> <span class="keyword">ON</span> <span class="keyword">UPDATE</span> <span class="built_in">CURRENT_TIMESTAMP</span>,</span><br><span class="line"><span class="keyword">PRIMARY</span> KEY (`id`)</span><br><span class="line">) ENGINE<span class="operator">=</span>INNODB <span class="keyword">DEFAULT</span> CHARSET<span class="operator">=</span>utf8 COMMENT <span class="operator">=</span> <span class="string">&#x27;app用户表&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建插入100万数据函数</span></span><br><span class="line"><span class="comment">-- 写函数之前的标志</span></span><br><span class="line">DELIMITER $$</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> mock_data()</span><br><span class="line"><span class="keyword">RETURNS</span> <span class="type">INT</span></span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line"><span class="keyword">DECLARE</span> num <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">1000000</span>;</span><br><span class="line"><span class="keyword">DECLARE</span> i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">WHILE i<span class="operator">&lt;</span>num DO</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> `app_user`(`name`,`email`,`phone`,`gender`, `password`, `age`)</span><br><span class="line"><span class="keyword">VALUES</span>(</span><br><span class="line">CONCAT(<span class="string">&#x27;用户&#x27;</span>,i), </span><br><span class="line"><span class="string">&#x27;990721@qq.com&#x27;</span>,</span><br><span class="line">CONCAT(<span class="string">&#x27;18&#x27;</span>, <span class="built_in">FLOOR</span>(RAND()<span class="operator">*</span><span class="number">999999999</span>)),</span><br><span class="line"><span class="built_in">FLOOR</span>(RAND()<span class="operator">*</span><span class="number">2</span>), </span><br><span class="line">UUID(), </span><br><span class="line"><span class="built_in">FLOOR</span>(RAND()<span class="operator">*</span><span class="number">100</span>));</span><br><span class="line"><span class="keyword">SET</span> i<span class="operator">=</span>i<span class="operator">+</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">END</span> WHILE;</span><br><span class="line"><span class="keyword">RETURN</span> i;</span><br><span class="line"><span class="keyword">END</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 执行此函数 生成一百万条数据</span></span><br><span class="line"><span class="keyword">SELECT</span> mock_data() </span><br><span class="line"><span class="comment">/*[0:24:54][28961 ms]*/</span> <span class="keyword">SELECT</span> mock_data(); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> `mock_data`</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">FUNCTION</span> `mock_data`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看当前数据库的所有自定义函数的信息</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">FUNCTION</span> STATUS;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 对比使用索引 -性能优化</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `app_user` <span class="keyword">WHERE</span> `name` <span class="operator">=</span> <span class="string">&#x27;用户998979&#x27;</span></span><br><span class="line"><span class="comment">-- 执行耗时   : 0.389 sec</span></span><br><span class="line"><span class="comment">-- 传送时间   : 0 sec</span></span><br><span class="line"><span class="comment">-- 总耗时      : 0.389 sec</span></span><br><span class="line"></span><br><span class="line">EXPLAIN <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `app_user` <span class="keyword">WHERE</span> `name` <span class="operator">=</span> <span class="string">&#x27;用户998979&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> INDEX `id_app_user_name` <span class="keyword">ON</span> `app_user`(`name`);</span><br><span class="line"><span class="comment">-- 执行耗时   : 3.118 sec</span></span><br><span class="line"><span class="comment">-- 传送时间   : 0 sec</span></span><br><span class="line"><span class="comment">-- 总耗时      : 3.118 sec</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> `app_user` <span class="keyword">WHERE</span> `name` <span class="operator">=</span> <span class="string">&#x27;用户998979&#x27;</span></span><br><span class="line"><span class="comment">-- 执行耗时   : 0.001 sec</span></span><br><span class="line"><span class="comment">-- 传送时间   : 0 sec</span></span><br><span class="line"><span class="comment">-- 总耗时      : 0.001 sec</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>SQL编程 函数 <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_45726908/article/details/124191488">参考文档</a></p>
<p>MySQL 索引 数据结构 </p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38327769/article/details/124244178">参考文档</a></p>
<p><a target="_blank" rel="noopener" href="http://blog.codinglabs.org/articles/theory-of-mysql-index.html">参考文档</a></p>
<p>EXPLAIN <a target="_blank" rel="noopener" href="https://blog.csdn.net/jiadajing267/article/details/81269067">参考文档</a></p>
<p><em>索引在数据量小的时候 作用很难显示的看到 但是一旦数据流较大 优势就显而易见</em></p>
<h3 id="7-SQL编程"><a href="#7-SQL编程" class="headerlink" title="7. SQL编程"></a>7. SQL编程</h3><h3 id="8-数据库管理"><a href="#8-数据库管理" class="headerlink" title="8. 数据库管理"></a>8. 数据库管理</h3><p>运维级别 MySQL</p>
<ul>
<li>MySQL 底层 架构原理</li>
<li>MySQL 集群搭建</li>
<li>MySQL 负载均衡</li>
<li>MySQL 主从复制</li>
</ul>
<blockquote>
<p><strong>权限管理</strong></p>
</blockquote>
<p><strong>用户管理</strong></p>
<ul>
<li>SQLyog 可视化管理</li>
<li>SQL 命令控制</li>
</ul>
<p><strong>SQL 命令控制</strong></p>
<p>本质是对 <code>mysql.user</code> 表 进行 增删改查</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查看用户列表</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> mysql.`<span class="keyword">user</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 创建用户 %为 默认 localhost</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">USER</span> `linyuxuan` IDENTIFIED <span class="keyword">BY</span> <span class="string">&#x27;123456&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改密码</span></span><br><span class="line"><span class="comment">-- 修改当前用户密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="operator">=</span> PASSWORD(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="comment">-- 修改指定用户密码</span></span><br><span class="line"><span class="keyword">SET</span> PASSWORD <span class="keyword">FOR</span> `linyuxuan` <span class="operator">=</span> PASSWORD(<span class="string">&#x27;123456&#x27;</span>)</span><br><span class="line"><span class="comment">-- 用户重命名</span></span><br><span class="line">RENAME <span class="keyword">USER</span> `linyuxuan` <span class="keyword">TO</span> `xiaoyuxuan`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 用户授权</span></span><br><span class="line"><span class="comment">-- 授予全部权限 ALL PRIVILEGES 但即使 ALL PRIVILEGES 也没有 root 权限高</span></span><br><span class="line"><span class="comment">-- GRANT 权限 ON 库.表 TO 用户名</span></span><br><span class="line"><span class="keyword">GRANT</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">TO</span> `xiaoyuxuan`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 查看授予用户权限操作</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> `xiaoyuxuan`</span><br><span class="line"><span class="comment">-- GRANT ALL PRIVILEGES ON *.* TO &#x27;xiaoyuxuan&#x27;@&#x27;%&#x27;</span></span><br><span class="line"><span class="comment">-- 查看管理员权限</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> root<span class="variable">@localhost</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> <span class="string">&#x27;root&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span></span><br><span class="line"><span class="keyword">SHOW</span> GRANTS <span class="keyword">FOR</span> `root`@`localhost`</span><br><span class="line"><span class="comment">-- GRANT ALL PRIVILEGES ON *.* TO &#x27;root&#x27;@&#x27;localhost&#x27; WITH GRANT OPTION</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 撤销权限</span></span><br><span class="line"><span class="comment">-- REVOKE 权限 ON 库.表 FROM 用户名</span></span><br><span class="line"><span class="keyword">REVOKE</span> <span class="keyword">ALL</span> PRIVILEGES <span class="keyword">ON</span> <span class="operator">*</span>.<span class="operator">*</span> <span class="keyword">FROM</span> `xiaoyuxuan`</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除用户</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">USER</span> `xiaoyuxuan`</span><br></pre></td></tr></table></figure>



<blockquote>
<p><strong>MySQL备份</strong></p>
</blockquote>
<p>MySQL 备份的目的</p>
<ul>
<li>保证重要数据不会意外丢失</li>
<li>用于数据库迁移</li>
</ul>
<p>MySQL 数据库备份方式</p>
<ul>
<li><p>直接拷贝备份物理文件</p>
</li>
<li><p>在可视化工具中 手动导出</p>
</li>
<li><p>使用数据库操作命令导出 <code>mysqldump</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导出一张表</span></span><br><span class="line">mysqldump -hlocalhost -uroot -p123456 school student &gt;D:/a.sql</span><br><span class="line"><span class="comment"># 导出多张表</span></span><br><span class="line">mysqldump -hlocalhost -uroot -p123456 school student result &gt;D:/a.sql</span><br><span class="line"><span class="comment"># 导入数据库脚本</span></span><br><span class="line">mysql -uroot -p123456</span><br><span class="line">use school;</span><br><span class="line"><span class="built_in">source</span> D:/a.sql</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="9-数据库设计"><a href="#9-数据库设计" class="headerlink" title="9. 数据库设计"></a>9. 数据库设计</h3><blockquote>
<p><strong>设计复杂数据库</strong></p>
</blockquote>
<p>对比学习 糟糕数据库设计 与 良好数据库设计</p>
<p><strong>糟糕数据库设计</strong></p>
<ul>
<li>数据冗余 空间浪费</li>
<li>外键混乱 导致插入和删除都异常麻烦 –解决方式屏蔽物理外键</li>
<li>SQL查询性能差</li>
</ul>
<p><strong>良好数据库设计</strong></p>
<ul>
<li>节省内存空间</li>
<li>保证数据库完整性</li>
<li>便于开发系统</li>
</ul>
<p><strong>软件开发前 关于数据库的设计</strong></p>
<ul>
<li>需求分析：分析 业务 与 数据库需要处理数据的需求</li>
<li>概要设计：设计关系图 E-R 图</li>
</ul>
<p>设计数据库案例：</p>
<ul>
<li>需求分析<ul>
<li>用户表 用户登录 个人信息 博客分类 博客内容</li>
<li>分类表 文章分类 创建人</li>
<li>博客内容表 文章信息</li>
<li>自定义表 key : value</li>
</ul>
</li>
<li>标识实体类 将需求落地到字段</li>
<li>标识实体之间的关系<ul>
<li>user — blog 写博客</li>
<li>user — category 创建分类</li>
<li>user — user 关注</li>
</ul>
</li>
</ul>
<p><strong>常见系统</strong></p>
<p>BBS CRM….</p>
<blockquote>
<p><strong>三大范式</strong></p>
</blockquote>
<p>三大范式设计初衷 –规范数据库设计：( 为解决以下问题 )</p>
<ul>
<li>信息重复</li>
<li>更新异常</li>
<li>插入异常 –无法正常显示信息</li>
<li>删除异常 –丢失有效信息</li>
</ul>
<p><strong>三大范式</strong></p>
<ul>
<li>第一范式 ( 1NF )<br><strong>第一范式（1NF）：要求数据库表的每一列都是不可分割的原子数据项</strong></li>
<li>第二范式 ( 2NF ) –每张表只描述一件事情<br><strong>第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于候选码（在1NF基础上消除非主属性对主码的部分函数依赖）</strong></li>
<li>第三范式 ( 3NF ) –更鲜明的拆开字段 针对于对象 使其更清晰表达<br><strong>第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</strong></li>
</ul>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/GB__LaoWang/article/details/117082522">参考文档</a></p>
<p>&#x3D;&#x3D;合理规划数据库 规范性 与 性能 的关系&#x3D;&#x3D;</p>
<p><strong>阿里规范：关联查询的表不能超过 三张表</strong></p>
<p><strong>可以存在合理的冗余字段 来优化性能 避免多表查询</strong></p>
<h3 id="10-JDBC"><a href="#10-JDBC" class="headerlink" title="10. JDBC"></a>10. JDBC</h3><blockquote>
<p><strong>驱动</strong></p>
</blockquote>
<p>声卡驱动 显卡驱动 数据库驱动</p>
<p>数据库驱动由数据库厂商提供 应用程序通过数据库驱动操作数据库</p>
<p>没有什么是加一层解决不了的 如果有 就再加一层 类似案例 –Nginx负载均衡</p>
<p><a target="_blank" rel="noopener" href="https://www.apache.org/index.html#projects-list">apache开源项目列表</a></p>
<h2 id="Oracle"><a href="#Oracle" class="headerlink" title="Oracle"></a>Oracle</h2><h2 id="PostgreSQL"><a href="#PostgreSQL" class="headerlink" title="PostgreSQL"></a>PostgreSQL</h2>
    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>Linyuxuan
  </li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="https://negativefunction.github.io/2022/10/07/MySQL/" title="MySQL">https://negativefunction.github.io/2022/10/07/MySQL/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.
  </li>
</ul>
</div>


      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2022/07/07/SpringBoot-3/" rel="prev" title="SpringBoot-3">
      <i class="fa fa-chevron-left"></i> SpringBoot-3
    </a></div>
      <div class="post-nav-item">
    <a href="/2022/11/11/JVM/" rel="next" title="JVM">
      JVM <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.</span> <span class="nav-text">数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL"><span class="nav-number">1.1.</span> <span class="nav-text">MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-MySQL%E7%AE%80%E4%BB%8B"><span class="nav-number">1.1.1.</span> <span class="nav-text">1. MySQL简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%93%8D%E4%BD%9CMySQL"><span class="nav-number">1.1.2.</span> <span class="nav-text">2. 操作MySQL</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">2.1 操作数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%A1%A8"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">2.2 操作数据库的表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-%E6%93%8D%E4%BD%9C%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">2.3 操作数据</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E6%95%B0%E6%8D%AE%E5%BA%93%E5%BC%95%E6%93%8E"><span class="nav-number">1.1.3.</span> <span class="nav-text">3. 数据库引擎</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%BA%A7%E5%88%AB%E5%8A%A0%E5%AF%86"><span class="nav-number">1.1.4.</span> <span class="nav-text">4. 数据库级别加密</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E4%BA%8B%E5%8A%A1"><span class="nav-number">1.1.5.</span> <span class="nav-text">5. 事务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E7%B4%A2%E5%BC%95"><span class="nav-number">1.1.6.</span> <span class="nav-text">6. 索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-SQL%E7%BC%96%E7%A8%8B"><span class="nav-number">1.1.7.</span> <span class="nav-text">7. SQL编程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86"><span class="nav-number">1.1.8.</span> <span class="nav-text">8. 数据库管理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.1.9.</span> <span class="nav-text">9. 数据库设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-JDBC"><span class="nav-number">1.1.10.</span> <span class="nav-text">10. JDBC</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Oracle"><span class="nav-number">1.2.</span> <span class="nav-text">Oracle</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#PostgreSQL"><span class="nav-number">1.3.</span> <span class="nav-text">PostgreSQL</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Linyuxuan"
      src="https://xingqiu-tuchuang-1256524210.cos.ap-shanghai.myqcloud.com/252/05.jpg">
  <p class="site-author-name" itemprop="name">Linyuxuan</p>
  <div class="site-description" itemprop="description">Hope Sometimes Love Brain</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">18</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2020 – 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa-gift"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Linyuxuan</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  















    <div id="pjax">
  

  

    </div>
</body>
</html>
